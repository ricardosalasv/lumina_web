{% extends "layout.html" %}

{% block body %}

    <!-- Passing JSONs from Flask to JS-->
    <script> 
        var project = JSON.parse('{{ project | tojson | safe}}');
        var fixtureList = JSON.parse('{{ brandsModelsJSON | tojson | safe }}');
    </script>

    <!-- Loading scripts files -->
    <script src="../static/heightFiller_ProjectPage.js"></script>
    <script src="../static/project.js"></script>
    <script src="../static/loadProject.js"></script>

    <section  class="container-fluid gray-background project-dashboard my-0 mx-0 px-0 py-0">
        
        <div id="mainSection" class="row">

            <div class="col">
                <!-- Project Title -->
                <div class="row align-items-center projectTitle">
                    <div class="col-auto darkGray-background projectTitle-field text-center">
                        <h1>PROJECT</h1>
                    </div>
        
                    <div class="col-4 projectTitleText">
                        <h1><strong>{{ project["name"] }}</strong></h1>
                    </div>
                </div>
    
                <div class="row justify-content-center position-relative gray-background">

                    <form action="" method="" onsubmit="return false;">
                        {{ form.hidden_tag() }}
                        <!-- Calculation area -->
                        <div class="row justify-content-center align-items-center position-relative">
                            
                            <!-- Physical aspects of the space -->
                            <div class="col project-panel1">
                                <div class="row">
                                    <h2>Room's Physical Characteristics</h2>
                                </div>
            
                                <!-- Floorplan Shape radio buttons -->
                                <div class="row">
                                    <div id="fpShapeContainer" class="col">
                                        <div class="form-group project-field">
            
                                            {{ form.floorplanShape.label(class="form-control-label") }}
                                            {{ form.floorplanShape(id="fpShapeSelection", class="form-control") }}
            
                                        </div>
                                    </div>
                                </div>
            
                                <!-- Room dimensions -->
                                <div class="row">
                                    
                                    <div class="col">
            
                                        <div class="form-group project-field">
                    
                                            {{ form.roomLength.label(class="form-control-label") }}
                    
                                            {% if form.roomLength.errors %}
                                                {{ form.roomLength(class="form-control is-invalid regularFpOptions") }}
                                                <div class="invalid-feedback">
                                                    {% for error in form.roomLength.errors %}
                                                        <span>{{ error }}</span>
                                                    {% endfor %}
                                                </div>
                                            {% else %}
                                                {{ form.roomLength(class="form-control regularFpOptions") }}
                                            {% endif%}
                    
                                        </div>
            
                                    </div>
            
                                    <div class="col">
            
                                        <div class="form-group project-field">
                
                                            {{ form.roomWidth.label(class="form-control-label") }}
                    
                                            {% if form.roomWidth.errors %}
                                                {{ form.roomWidth(class="form-control is-invalid regularFpOptions") }}
                                                <div class="invalid-feedback">
                                                    {% for error in form.roomWidth.errors %}
                                                        <span>{{ error }}</span>
                                                    {% endfor %}
                                                </div>
                                            {% else %}
                                                {{ form.roomWidth(class="form-control regularFpOptions") }}
                                            {% endif%}
                                            
                                        </div>
            
                                    </div>
            
                                    <div class="col">
            
                                        <div class="form-group project-field">
                
                                            {{ form.roomHeight.label(class="form-control-label") }}
                    
                                            {% if form.roomHeight.errors %}
                                                {{ form.roomHeight(class="form-control is-invalid") }}
                                                <div class="invalid-feedback">
                                                    {% for error in form.roomHeight.errors %}
                                                        <span>{{ error }}</span>
                                                    {% endfor %}
                                                </div>
                                            {% else %}
                                                {{ form.roomHeight(class="form-control") }}
                                            {% endif%}
                                            
                                        </div>
            
                                    </div>
            
                                    <div class="col">
            
                                        <div class="form-group project-field">
                
                                            {{ form.roomArea.label(class="form-control-label") }}
                    
                                            {% if form.roomArea.errors %}
                                                {{ form.roomArea(class="form-control is-invalid irregularFpOptions") }}
                                                <div class="invalid-feedback">
                                                    {% for error in form.roomArea.errors %}
                                                        <span>{{ error }}</span>
                                                    {% endfor %}
                                                </div>
                                            {% else %}
                                                {{ form.roomArea(class="form-control irregularFpOptions") }}
                                            {% endif%}
                                            
                                        </div>
            
                                    </div>
            
                                </div>

                                <!-- Room's Materials -->
                                <div class="row">
                                    
                                    <div class="col">
            
                                        <div class="form-group project-field">
                    
                                            {{ form.roomCeilingMaterial.label(class="form-control-label") }}
                    
                                            {% if form.roomCeilingMaterial.errors %}
                                                {{ form.roomCeilingMaterial(class="form-control is-invalid") }}
                                                <div class="invalid-feedback">
                                                    {% for error in form.roomCeilingMaterial.errors %}
                                                        <span>{{ error }}</span>
                                                    {% endfor %}
                                                </div>
                                            {% else %}
                                                {{ form.roomCeilingMaterial(class="form-control") }}
                                            {% endif%}
                    
                                        </div>
            
                                    </div>
            
                                    <div class="col">
            
                                        <div class="form-group project-field">
                
                                            {{ form.roomWallMaterial.label(class="form-control-label") }}
                    
                                            {% if form.roomWallMaterial.errors %}
                                                {{ form.roomWallMaterial(class="form-control is-invalid") }}
                                                <div class="invalid-feedback">
                                                    {% for error in form.roomWallMaterial.errors %}
                                                        <span>{{ error }}</span>
                                                    {% endfor %}
                                                </div>
                                            {% else %}
                                                {{ form.roomWallMaterial(class="form-control") }}
                                            {% endif%}
                                            
                                        </div>
            
                                    </div>
            
                                    <div class="col">
            
                                        <div class="form-group project-field">
                
                                            {{ form.roomFloorMaterial.label(class="form-control-label") }}
                    
                                            {% if form.roomFloorMaterial.errors %}
                                                {{ form.roomFloorMaterial(class="form-control is-invalid") }}
                                                <div class="invalid-feedback">
                                                    {% for error in form.roomFloorMaterial.errors %}
                                                        <span>{{ error }}</span>
                                                    {% endfor %}
                                                </div>
                                            {% else %}
                                                {{ form.roomFloorMaterial(class="form-control") }}
                                            {% endif%}
                                            
                                        </div>
            
                                    </div>
            
                                </div>
                
                            </div>
                
                            <!-- Lighting Preferences -->
                            <div class="col project-panel2">
                
                                <div class="row">
                                    <h2>Lighting Preferences</h2>
                                </div>
            
                                <!-- Lux Requirements and Fixture Model -->
                                <div class="row">
                                    <div class="col-6">
                                        <div class="form-group project-field">
            
                                            {{ form.luxRequirement.label(class="form-control-label") }}
                                            {{ form.luxRequirement(class="form-control") }}
            
                                        </div>
                                    </div>

                                    <div class="col-6">
                                        <div class="form-group project-field">
            
                                            {{ form.lightingPlaneHeight.label(class="form-control-label") }}
                                            {{ form.lightingPlaneHeight(class="form-control") }}
            
                                        </div>
                                    </div>
                                </div>
            
                                <!-- Fixture Data -->
                                <div class="row">
                                    <div class="col">
                                        <div class="form-group project-field">
                    
                                            {{ form.brand.label(class="form-control-label") }}
                    
                                            {% if form.brand.errors %}
                                                {{ form.brand(class="form-control is-invalid") }}
                                                <div class="invalid-feedback">
                                                    {% for error in form.brand.errors %}
                                                        <span>{{ error }}</span>
                                                    {% endfor %}
                                                </div>
                                            {% else %}
                                                {{ form.brand(class="form-control") }}
                                            {% endif%}
                    
                                        </div>
                                    </div>

                                    <div class="col">
                                        <div class="form-group project-field">
                    
                                            {{ form.fixtureModel.label(class="form-control-label") }}
                    
                                            {% if form.fixtureModel.errors %}
                                                {{ form.fixtureModel(class="form-control is-invalid") }}
                                                <div class="invalid-feedback">
                                                    {% for error in form.fixtureModel.errors %}
                                                        <span>{{ error }}</span>
                                                    {% endfor %}
                                                </div>
                                            {% else %}
                                                {{ form.fixtureModel(class="form-control") }}
                                            {% endif%}
                    
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col">
                                            <div class="form-group project-field">
                    
                                                {{ form.fixtureLumens.label(class="form-control-label") }}
                        
                                                {% if form.fixtureLumens.errors %}
                                                    {{ form.fixtureLumens(class="form-control is-invalid lockedField") }}
                                                    <div class="invalid-feedback">
                                                        {% for error in form.fixtureLumens.errors %}
                                                            <span>{{ error }}</span>
                                                        {% endfor %}
                                                    </div>
                                                {% else %}
                                                    {{ form.fixtureLumens(class="form-control lockedField") }}
                                                {% endif%}
                                                
                                            </div>
                                        </div>
                
                                        <div class="col">
                                            <div class="form-group project-field">
                    
                                                {{ form.fixtureFinish.label(class="form-control-label") }}
                        
                                                {% if form.fixtureFinish.errors %}
                                                    {{ form.fixtureFinish(class="form-control is-invalid lockedField") }}
                                                    <div class="invalid-feedback">
                                                        {% for error in form.fixtureFinish.errors %}
                                                            <span>{{ error }}</span>
                                                        {% endfor %}
                                                    </div>
                                                {% else %}
                                                    {{ form.fixtureFinish(class="form-control lockedField") }}
                                                {% endif%}
                                                
                                            </div>
                                        </div>
                
                                        <div class="col">
                                            <div class="form-group project-field">
                    
                                                {{ form.fixtureCost.label(class="form-control-label") }}
                        
                                                {% if form.fixtureCost.errors %}
                                                    {{ form.fixtureCost(class="form-control is-invalid lockedField") }}
                                                    <div class="invalid-feedback">
                                                        {% for error in form.fixtureCost.errors %}
                                                            <span>{{ error }}</span>
                                                        {% endfor %}
                                                    </div>
                                                {% else %}
                                                    {{ form.fixtureCost(class="form-control lockedField") }}
                                                {% endif%}
                                                
                                            </div>
                                        </div>
                                    </div>
            
                                </div>
                
                            </div>
                
                        </div>

                        <!-- Calculate Button -->
                        <button type="button" id="calculateButton" class="w-100">
                            {{form.calculate(type="submit", class="w-100 calculateButton", value="Calculate")}}
                        </button>
                    </form>

                    <div id="summarySpaceInForm" class="row">

                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="container-fluid justify-content-center p-0 m-0 toBottom">
        <div id="summarySection" class="row justify-content-center summary m-0 w-100">
            <div class="col text-center">
                <div class="row">
                    <h2>Amount of Fixtures</h2>
                </div>
                <div class="row">
                    <h2><strong id="AmountOfFixtures">-</strong></h2>
                </div>
            </div>

            <div class="col text-center total-panel">
                <div class="row">
                    <h2>Total Cost</h2>
                </div>
                <div class="row">
                   <h2><strong id="ProjectCost">-</strong></h2>
                </div>
            </div>
        </div>
    </section>

{% endblock %}